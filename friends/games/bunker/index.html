<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бункер | LoveCouple_Friends</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Шапка игры -->
        <header class="game-header">
            <div class="logo">
                <i class="fas fa-user-shield"></i>
                <h1>Бункер</h1>
            </div>
            <div class="game-info">
                <div class="phase-indicator" id="phaseIndicator">
                    <span id="phaseText">Ожидание игроков</span>
                    <div class="timer" id="timer">--:--</div>
                </div>
                <div class="player-count" id="playerCount">
                    <i class="fas fa-users"></i>
                    <span>1/8</span>
                </div>
            </div>
        </header>

        <!-- Основное содержимое -->
        <main class="game-content">
            <!-- Левая панель: информация об игре и управление -->
            <div class="left-panel">
                <div class="panel-section game-controls">
                    <h2><i class="fas fa-gamepad"></i> Управление игрой</h2>
                    <div class="control-buttons">
                        <button id="createGameBtn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Создать игру
                        </button>
                        <button id="joinGameBtn" class="btn btn-secondary">
                            <i class="fas fa-sign-in-alt"></i> Присоединиться
                        </button>
                        <button id="startGameBtn" class="btn btn-success" disabled>
                            <i class="fas fa-play"></i> Начать игру
                        </button>
                        <button id="nextRoundBtn" class="btn btn-warning" disabled>
                            <i class="fas fa-forward"></i> Следующий раунд
                        </button>
                        <button id="newGameBtn" class="btn btn-info" disabled>
                            <i class="fas fa-redo"></i> Новая игра
                        </button>
                    </div>
                </div>

                <div class="panel-section player-info">
                    <h2><i class="fas fa-user"></i> Ваша роль</h2>
                    <div class="role-card" id="playerRoleCard">
                        <div class="role-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="role-details">
                            <h3 id="playerRole">Не назначена</h3>
                            <p id="roleDescription">Подключитесь к игре, чтобы получить роль</p>
                        </div>
                    </div>
                </div>

                <div class="panel-section resources">
                    <h2><i class="fas fa-box-open"></i> Ваши ресурсы</h2>
                    <div class="resource-list" id="playerResources">
                        <div class="resource-item">
                            <i class="fas fa-apple-alt"></i>
                            <span>Еда: <span id="foodCount">0</span></span>
                        </div>
                        <div class="resource-item">
                            <i class="fas fa-tint"></i>
                            <span>Вода: <span id="waterCount">0</span></span>
                        </div>
                        <div class="resource-item">
                            <i class="fas fa-first-aid"></i>
                            <span>Аптечки: <span id="medkitCount">0</span></span>
                        </div>
                        <div class="resource-item">
                            <i class="fas fa-tools"></i>
                            <span>Инструменты: <span id="toolCount">0</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Центральная панель: игровое поле -->
            <div class="center-panel">
                <div class="game-phase night-phase" id="nightPhase" style="display: none;">
                    <div class="phase-header">
                        <i class="fas fa-moon"></i>
                        <h2>Ночь</h2>
                        <p>Тайная фаза. Игроки выполняют свои особые действия.</p>
                    </div>
                    <div class="phase-actions" id="nightActions">
                        <!-- Динамически заполняется действиями для роли -->
                    </div>
                    <div class="phase-timer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="nightProgress"></div>
                        </div>
                        <p>До окончания ночи осталось: <span id="nightTimer">60</span> сек</p>
                    </div>
                </div>

                <div class="game-phase day-phase" id="dayPhase" style="display: none;">
                    <div class="phase-header">
                        <i class="fas fa-sun"></i>
                        <h2>День</h2>
                        <p>Фаза обсуждения и голосования.</p>
                    </div>
                    <div class="voting-section">
                        <h3>Голосование: Кто должен покинуть бункер?</h3>
                        <div class="voting-options" id="votingOptions">
                            <!-- Динамически заполняется списком игроков для голосования -->
                        </div>
                        <button id="submitVoteBtn" class="btn btn-danger" disabled>
                            <i class="fas fa-vote-yea"></i> Проголосовать
                        </button>
                        <div class="vote-results" id="voteResults">
                            <!-- Результаты голосования -->
                        </div>
                    </div>
                    <div class="event-log">
                        <h3><i class="fas fa-scroll"></i> История событий</h3>
                        <div class="log-container" id="eventLog">
                            <!-- Динамически заполняется событиями игры -->
                        </div>
                    </div>
                </div>

                <div class="game-phase lobby-phase" id="lobbyPhase">
                    <div class="phase-header">
                        <i class="fas fa-door-open"></i>
                        <h2>Лобби</h2>
                        <p>Ожидание подключения игроков</p>
                    </div>
                    <div class="connection-section">
                        <div class="connection-form" id="connectionForm">
                            <h3>Подключение к игре</h3>
                            <div class="form-group">
                                <label for="playerName">Ваше имя:</label>
                                <input type="text" id="playerName" placeholder="Введите ваше имя" maxlength="20">
                            </div>
                            <div class="form-group" id="roomCodeGroup">
                                <label for="roomCode">Код комнаты:</label>
                                <input type="text" id="roomCode" placeholder="Введите код комнаты">
                            </div>
                            <button id="connectBtn" class="btn btn-primary">
                                <i class="fas fa-plug"></i> Подключиться
                            </button>
                        </div>
                        <div class="room-info" id="roomInfo" style="display: none;">
                            <h3>Игровая комната</h3>
                            <div class="room-code">
                                <strong>Код комнаты:</strong>
                                <span id="currentRoomCode">XXXX</span>
                                <button id="copyCodeBtn" class="btn-icon">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="room-players">
                                <strong>Игроки в комнате:</strong>
                                <ul id="roomPlayersList">
                                    <!-- Список игроков -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="players-list">
                    <h3><i class="fas fa-users"></i> Игроки в бункере</h3>
                    <div class="players-grid" id="playersGrid">
                        <!-- Динамически заполняется игроками -->
                    </div>
                </div>
            </div>

            <!-- Правая панель: правила и помощь -->
            <div class="right-panel">
                <div class="panel-section game-rules">
                    <h2><i class="fas fa-book"></i> Правила игры</h2>
                    <div class="rules-content">
                        <p>После апокалипсиса вы оказались в бункере с другими выжившими.</p>
                        <p>У каждого есть роль с особыми способностями.</p>
                        <p><strong>Фазы игры:</strong></p>
                        <ul>
                            <li><strong>Ночь:</strong> Игроки выполняют тайные действия.</li>
                            <li><strong>День:</strong> Обсуждение и голосование, кто покинет бункер.</li>
                        </ul>
                        <p><strong>Цели:</strong></p>
                        <ul>
                            <li>Выжившие должны выявить и изгнать антагонистов.</li>
                            <li>Антагонисты должны устранить всех выживших.</li>
                        </ul>
                    </div>
                </div>

                <div class="panel-section roles-help">
                    <h2><i class="fas fa-mask"></i> Роли</h2>
                    <div class="roles-list">
                        <div class="role-help">
                            <h4><i class="fas fa-user-check"></i> Выживший</h4>
                            <p>Обычный житель бункера. Голосует днём, чтобы изгнать антагонистов.</p>
                        </div>
                        <div class="role-help">
                            <h4><i class="fas fa-user-tie"></i> Лидер</h4>
                            <p>Может отменить одно голосование за игру. Получает +1 ресурс каждый раунд.</p>
                        </div>
                        <div class="role-help">
                            <h4><i class="fas fa-user-md"></i> Доктор</h4>
                            <p>Ночью может спасти одного игрока от изгнания или саботажа.</p>
                        </div>
                        <div class="role-help">
                            <h4><i class="fas fa-user-secret"></i> Интриган</h4>
                            <p>Антагонист. Ночью может саботировать ресурсы или подстраивать голосование.</p>
                        </div>
                        <div class="role-help">
                            <h4><i class="fas fa-brain"></i> Псих</h4>
                            <p>Может проверить роль другого игрока ночью. Непредсказуем в действиях.</p>
                        </div>
                    </div>
                    <button id="showAllRolesBtn" class="btn btn-link">
                        <i class="fas fa-eye"></i> Показать все роли
                    </button>
                </div>

                <div class="panel-section game-events">
                    <h2><i class="fas fa-bolt"></i> События раунда</h2>
                    <div class="events-list" id="roundEvents">
                        <!-- Динамически заполняется событиями раунда -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Нижняя панель: уведомления и статус -->
        <footer class="game-footer">
            <div class="connection-status" id="connectionStatus">
                <i class="fas fa-wifi"></i>
                <span>Не подключено</span>
            </div>
            <div class="game-status" id="gameStatus">
                Ожидание подключения игроков...
            </div>
            <div class="action-buttons">
                <button id="helpBtn" class="btn-icon">
                    <i class="fas fa-question-circle"></i>
                </button>
                <button id="soundToggleBtn" class="btn-icon">
                    <i class="fas fa-volume-mute"></i>
                </button>
                <button id="fullscreenBtn" class="btn-icon">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
        </footer>
    </div>

    <!-- Модальные окна -->
    <div id="roleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ваша роль</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="role-modal-info">
                    <div class="role-modal-icon" id="modalRoleIcon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h3 id="modalRoleTitle">Выживший</h3>
                    <p id="modalRoleDescription">Вы обычный выживший в бункере. Ваша цель - выявить и изгнать всех антагонистов, голосуя против них в дневной фазе.</p>
                    <div class="role-abilities">
                        <h4>Способности:</h4>
                        <ul id="modalRoleAbilities">
                            <li>Голосование днём за изгнание игроков</li>
                            <li>Получение ресурсов каждый раунд</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary close-modal">Понятно</button>
            </div>
        </div>
    </div>

    <div id="allRolesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Все роли в игре</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="all-roles-grid" id="allRolesGrid">
                    <!-- Динамически заполняется всеми ролями -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary close-modal">Закрыть</button>
            </div>
        </div>
    </div>

    <!-- Уведомления -->
    <div id="notificationArea"></div>

    <script src="client.js"></script>
</body>
</html>
