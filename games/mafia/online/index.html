<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>MAFIA NOIR ONLINE</title>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="noir-overlay"></div>

    <div class="app-container">
        <!-- ЭКРАН 1: ВХОД / ЛОББИ -->
        <section id="screen-auth" class="page active">
            <div class="center-content">
                <h1 class="brand">MAFIA<span>NOIR</span></h1>
                <p class="label-row">Введите позывной</p>
                <input type="text" id="username" class="name-input" placeholder="НИКНЕЙМ" maxlength="12" style="width: 100%;">
                
                <button class="action-btn red" onclick="app.createRoom()">СОЗДАТЬ ДЕЛО</button>
                <div class="label-row">ИЛИ</div>
                <input type="text" id="room-input" class="name-input" placeholder="КОД ДЕЛА" style="width: 100%; text-transform: uppercase;">
                <button class="action-btn" onclick="app.joinRoom()">ВСТУПИТЬ</button>
            </div>
        </section>

        <!-- ЭКРАН 2: ОЖИДАНИЕ -->
        <section id="screen-lobby" class="page">
            <div class="top-bar">
                <div class="brand">ДЕЛО № <span id="display-room-code">----</span></div>
                <button class="icon-btn" onclick="location.reload()"><i class="fas fa-times"></i></button>
            </div>
            <div class="setup-scroll" id="player-list">
                <!-- Список игроков -->
            </div>
            <div id="host-controls" style="display: none;">
                <p class="label-row">Настройка ролей</p>
                <div class="roles-toggle-grid">
                    <div class="role-check"><input type="checkbox" id="role-doc" checked disabled> Доктор</div>
                    <div class="role-check"><input type="checkbox" id="role-sheriff" checked disabled> Шериф</div>
                </div>
                <button class="action-btn red" onclick="app.requestStart()">НАЧАТЬ ОБЛАВУ</button>
            </div>
            <p id="wait-msg" class="label-row" style="text-align: center;">Ждем комиссара...</p>
        </section>

        <!-- ЭКРАН 3: РОЛЬ (FLIP CARD) -->
        <section id="screen-reveal" class="page">
            <div class="card-area">
                <div class="player-num">ВАША ЛИЧНОСТЬ</div>
                <div class="flip-card" onclick="this.querySelector('.card-inner').classList.toggle('is-flipped')">
                    <div class="card-inner">
                        <div class="card-front">
                            <i class="fas fa-fingerprint role-icon"></i>
                            <p>НАЖМИ, ЧТОБЫ УЗНАТЬ</p>
                        </div>
                        <div class="card-back">
                            <i id="role-icon" class="fas fa-user-secret role-icon"></i>
                            <h2 id="role-name">МАФИЯ</h2>
                            <p id="role-desc" class="script-hint" style="margin-top: 15px;">Устраняйте мирных каждую ночь.</p>
                        </div>
                    </div>
                </div>
            </div>
            <p class="script-hint" style="text-align: center;">Город засыпает через мгновение...</p>
        </section>

        <!-- ЭКРАН 4: НОЧЬ -->
        <section id="screen-night" class="page">
            <div class="top-bar">
                <div class="brand">ГОРОД СПИТ</div>
                <div class="script-tag">НОЧЬ</div>
            </div>
            <div class="night-scroll" id="night-actions">
                <!-- Контент зависит от роли -->
                <div class="center-content">
                    <i class="fas fa-moon giant-icon"></i>
                    <p id="night-wait-text">Ждите своей очереди...</p>
                </div>
            </div>
        </section>

        <!-- ЭКРАН 5: УТРО (ОТЧЕТ) -->
        <section id="screen-morning" class="page">
            <div class="summary-box">
                <span class="quote-icon">«</span>
                <p class="report-text" id="morning-report">Ночь прошла спокойно...</p>
            </div>
            <button class="action-btn red" onclick="app.confirmMorning()">ОБСУДИТЬ</button>
        </section>

        <!-- ЭКРАН 6: ДЕНЬ (ГОЛОСОВАНИЕ) -->
        <section id="screen-day" class="page">
            <div class="day-header">
                <div class="timer-box" id="game-timer">60</div>
                <p class="label-row">КТО ВИНОВЕН?</p>
            </div>
            <div class="voting-grid" id="voting-list">
                <!-- Список живых игроков -->
            </div>
            <button id="btn-vote" class="action-btn red" disabled onclick="app.submitVote()">ВЫНЕСТИ ПРИГОВОР</button>
        </section>

        <!-- ЭКРАН 7: ФИНАЛ -->
        <section id="screen-results" class="page">
            <div class="center-content">
                <i class="fas fa-skull-crossbones giant-icon"></i>
                <h1 id="winner-text" class="brand" style="font-size: 2rem;">ПОБЕДА МАФИИ</h1>
                <button class="action-btn" onclick="location.reload()">В МЕНЮ</button>
            </div>
        </section>
    </div>

    <!-- Модалка уведомлений -->
    <div id="modal-overlay" class="modal-overlay" style="display: none; position: fixed; inset: 0; z-index: 1000; background: rgba(0,0,0,0.8); align-items: center; justify-content: center; padding: 20px;">
        <div class="modal-card" style="padding: 25px; border-radius: 20px; width: 100%; max-width: 300px; text-align: center;">
            <p id="modal-text" style="font-size: 14px; font-weight: 700;"></p>
            <button class="action-btn red" onclick="document.getElementById('modal-overlay').style.display='none'" style="padding: 10px; margin-top: 15px;">OK</button>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
