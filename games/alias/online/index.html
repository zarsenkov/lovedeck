<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ALIAS ONLINE</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #0f0c29; --accent: #00e5ff; --glass: rgba(255,255,255,0.1); }
        body { margin: 0; font-family: 'Montserrat', sans-serif; background: var(--bg); color: white; height: 100dvh; overflow: hidden; }
        
        .back-btn { position: fixed; top: 15px; left: 15px; width: 40px; height: 40px; background: var(--glass); border-radius: 10px; display: flex; align-items: center; justify-content: center; z-index: 1000; border: 1px solid rgba(255,255,255,0.2); }
        
        .screen { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; box-sizing: border-box; padding: 20px; }
        .screen.active { display: flex; animation: fadeIn 0.3s ease; }

        .card-panel { background: var(--glass); backdrop-filter: blur(15px); border-radius: 25px; padding: 20px; width: 100%; max-width: 350px; border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box; }
        
        input, select { width: 100%; padding: 15px; border-radius: 12px; border: none; background: rgba(0,0,0,0.3); color: white; font-size: 1rem; margin-bottom: 10px; box-sizing: border-box; outline: none; }
        button { width: 100%; padding: 15px; border-radius: 12px; border: none; font-weight: 900; font-size: 1rem; background: linear-gradient(135deg, #667eea, #764ba2); color: white; cursor: pointer; text-transform: uppercase; }

        .room-code-badge { background: rgba(0,0,0,0.4); padding: 15px; border-radius: 15px; color: var(--accent); font-size: 1.5rem; font-weight: 900; letter-spacing: 3px; display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }

        .player-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .score { font-weight: 900; color: var(--accent); }

        .game-header { position: absolute; top: 20px; width: 90%; display: flex; justify-content: space-between; font-weight: 900; }
        #word-card { width: 100%; height: 300px; background: rgba(255,255,255,0.1); border-radius: 30px; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 2px solid rgba(255,255,255,0.2); position: relative; }
        #current-word { font-size: 2.2rem; text-align: center; margin: 0 10px; }

        .controls { display: flex; gap: 20px; margin-top: 30px; }
        .circle-btn { width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 3px solid white; }
        .skip { border-color: #ff4b2b; color: #ff4b2b; }
        .ok { border-color: #00ff88; color: #00ff88; }

        .settings-label { font-size: 0.8rem; opacity: 0.6; margin-bottom: 5px; display: block; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="back-btn" onclick="goBack()"><i class="fas fa-arrow-left"></i></div>

    <!-- ВХОД -->
    <div id="screen-login" class="screen active">
        <h1 style="font-size: 3rem; font-weight: 900; margin-bottom: 20px;">ALIAS</h1>
        <div class="card-panel">
            <input type="text" id="username" placeholder="Ваше имя" maxlength="12">
            <button onclick="createRoom()">Создать комнату</button>
            <div style="text-align: center; margin: 15px; opacity: 0.4;">ИЛИ ПРИСОЕДИНИТЬСЯ</div>
            <input type="text" id="room-input" placeholder="Код комнаты" style="text-transform: uppercase;">
            <button onclick="joinRoom()" style="background: var(--glass);">Войти</button>
        </div>
    </div>

    <!-- ЛОББИ -->
    <div id="screen-lobby" class="screen">
        <div class="card-panel">
            <div class="room-code-badge" onclick="copyCode()">
                <span id="room-id-display">-----</span>
                <i class="fas fa-copy" style="font-size: 1rem; opacity: 0.5;"></i>
            </div>
            
            <div id="host-settings" class="hidden">
                <label class="settings-label">Время раунда (сек)</label>
                <select id="set-time" onchange="updateSettings()">
                    <option value="30">30</option><option value="60" selected>60</option><option value="90">90</option>
                </select>
                <label class="settings-label">Очков для победы</label>
                <select id="set-goal" onchange="updateSettings()">
                    <option value="10">10</option><option value="20" selected>20</option><option value="50">50</option>
                </select>
            </div>

            <h3 style="margin-bottom: 10px;">Игроки:</h3>
            <div id="player-list"></div>
            
            <button id="start-btn" onclick="startGame()" style="margin-top: 20px; display: none; background: var(--accent); color: black;">Начать игру</button>
            <p id="wait-msg" style="text-align: center; opacity: 0.5;">Ждем хоста...</p>
        </div>
    </div>

    <!-- ИГРА -->
    <div id="screen-game" class="screen">
        <div class="game-header">
            <div>⏱ <span id="timer">60</span></div>
            <div id="game-score">Очки: 0</div>
        </div>
        <div id="word-card">
            <div id="role-name" style="position: absolute; top: 15px; font-size: 0.7rem; opacity: 0.5; text-transform: uppercase;"></div>
            <h1 id="current-word">...</h1>
            <p id="hint-text" style="opacity: 0.4; margin-top: 10px; font-size: 0.8rem;"></p>
        </div>
        <div id="judge-controls" class="controls hidden">
            <div class="circle-btn skip" onclick="handleAction('skip')"><i class="fas fa-times"></i></div>
            <div class="circle-btn ok" onclick="handleAction('guessed')"><i class="fas fa-check"></i></div>
        </div>
    </div>

    <!-- ФИНАЛ -->
    <div id="screen-results" class="screen">
        <div class="card-panel" style="text-align: center;">
            <h1 id="result-title">ФИНАЛ</h1>
            <div id="final-scores"></div>
            <button onclick="location.reload()" style="margin-top: 20px;">В меню</button>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="script.js"></script>
</body>
</html>