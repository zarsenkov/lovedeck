<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Love Story Online | –ê–º–∞–ª–∏—è</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700;900&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="particle-container"></div>

    <div class="app-shell">
        <!-- –≠–ö–†–ê–ù 1: –í–•–û–î -->
        <section id="screen-setup" class="screen active">
            <div class="hero">
                <div class="main-orb">üå∏</div>
                <h1 class="title">LOVE<span>STORY</span></h1>
                <p class="subtitle">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–æ–º–∞–Ω –¥–ª—è –¥–≤–æ–∏—Ö</p>
            </div>
            <div class="clay-card setup-box">
                <div class="input-field">
                    <label style="font-size: 0.7rem; font-weight: 800; color: var(--p-rose); margin-left: 10px;">–ü–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫</label>
                    <input type="text" id="name1" placeholder="–ò–º—è" class="joy-input">
                </div>
                <div class="input-field" style="margin-top: 15px;">
                    <label style="font-size: 0.7rem; font-weight: 800; color: var(--p-rose); margin-left: 10px;">–í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫</label>
                    <input type="text" id="name2" placeholder="–ò–º—è" class="joy-input">
                </div>
                <button class="btn-clay primary" style="margin-top: 25px;" onclick="app.initUser()">–í–û–ô–¢–ò –í –ò–°–¢–û–†–ò–Æ</button>
            </div>
        </section>

        <!-- –≠–ö–†–ê–ù 2: –õ–û–ë–ë–ò -->
        <section id="screen-lobby" class="screen">
            <div class="lobby-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 class="section-label">–í–ê–®–ò –°–Æ–ñ–ï–¢–´</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-circle" onclick="app.toggleAudio()"><i id="audio-icon" class="fas fa-volume-mute"></i></button>
                    <button class="btn-circle" onclick="app.showAlbum()"><i class="fas fa-book-heart"></i></button>
                </div>
            </div>
            <div id="resume-container"></div>
            <div class="story-grid" id="story-list" style="display: flex; flex-direction: column; gap: 15px; flex: 1; overflow-y: auto;"></div>
            <div class="lobby-footer" style="margin-top: 20px;">
                <button class="btn-clay secondary" style="width: 100%;" onclick="app.resetData()">–°–ë–†–û–°–ò–¢–¨ –í–°–Å</button>
            </div>
        </section>

        <!-- –≠–ö–†–ê–ù 3: –ö–í–ï–°–¢ -->
        <section id="screen-quest" class="screen">
            <div class="quest-top" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <button class="btn-mini" onclick="app.confirmExit()"><i class="fas fa-chevron-left"></i></button>
                <div class="phase-info" style="text-align: center;">
                    <span id="phase-name" style="display: block; font-size: 0.7rem; font-weight: 800; color: var(--p-dark); text-transform: uppercase;">–§–ê–ó–ê</span>
                    <div id="phase-icon" style="font-size: 1.2rem;">‚ú®</div>
                </div>
                <div class="love-jar" id="main-jar">
                    <div class="liquid" id="jar-fill"></div>
                    <i class="fas fa-heart" style="z-index: 2; color: white;"></i>
                </div>
            </div>

            <div class="npc-block" style="margin-bottom: 20px;">
                <div class="amalia-avatar" id="amalia-avatar">‚ú®</div>
                <div class="npc-bubble clay-box" style="position: relative; overflow: hidden;">
                    <p id="npc-text">...</p>
                    <div id="npc-timer-line" class="npc-timer-line"></div>
                </div>
            </div>

            <div id="action-area" class="action-container" style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 20px;"></div>

            <!-- –ö–æ–ª–µ—Å–æ —Å—É–¥—å–±—ã -->
            <div id="duel-overlay" class="duel-overlay hidden">
                <div class="duel-card clay-box" style="width: 100%; text-align: center;">
                    <div class="wheel-container">
                        <div id="wheel" class="wheel">
                            <div class="sector" id="sector1"></div>
                            <div class="sector" id="sector2"></div>
                        </div>
                        <div class="wheel-pointer">‚ñº</div>
                    </div>
                    <h3 id="duel-result-text" style="font-family: 'Unbounded'; margin-top: 15px;">–ö–†–£–¢–ò–¢–ï!</h3>
                    <button id="btn-spin" class="btn-clay primary" style="margin-top: 15px;" onclick="app.spinWheel()">–ö–†–£–¢–ò–¢–¨</button>
                </div>
            </div>

            <div id="honesty-overlay" class="honesty-overlay hidden">
                <div class="honesty-modal clay-box" style="width: 100%; text-align: center;">
                    <h3 style="font-family: 'Unbounded'; font-size: 1rem; margin-bottom: 10px;">–ß–µ—Å—Ç–Ω–æ—Å—Ç—å</h3>
                    <p>–ü–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª –∏—Å–∫—Ä–µ–Ω–Ω–µ?</p>
                    <div class="honesty-btns">
                        <button class="btn-clay green" onclick="app.rateHonesty(true)">–í–ï–†–Æ</button>
                        <button class="btn-clay red" onclick="app.rateHonesty(false)">–ù–ï–¢</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- –≠–ö–†–ê–ù 4: –†–ï–ó–£–õ–¨–¢–ê–¢–´ -->
        <section id="screen-results" class="screen">
            <div class="clay-card result-box" style="text-align: center; margin: auto 0;">
                <h2 style="font-family: 'Unbounded'; margin-bottom: 20px;">–§–ò–ù–ê–õ</h2>
                <div style="font-size: 4rem; margin-bottom: 10px;">üèÜ</div>
                <div id="honesty-result" style="font-size: 3rem; font-weight: 900; color: var(--p-dark); font-family: 'Unbounded';">0%</div>
                <p>–í–∞—à–∞ –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —ç—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏</p>
                <button class="btn-clay primary" style="margin-top: 30px;" onclick="app.toLobby()">–í –õ–û–ë–ë–ò</button>
            </div>
        </section>

        <!-- –≠–ö–†–ê–ù 5: –ê–õ–¨–ë–û–ú -->
        <section id="screen-album" class="screen">
            <div class="album-header" style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                <button class="btn-mini" onclick="app.toLobby()"><i class="fas fa-chevron-left"></i></button>
                <h2 style="font-family: 'Unbounded'; font-size: 1rem;">–î–ù–ï–í–ù–ò–ö</h2>
            </div>
            <div id="album-content" class="album-scroll"></div>
        </section>
    </div>

    <div id="toast" class="toast"></div>
    <audio id="bg-music" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>

    <script src="cards.js"></script>
    <script src="script.js"></script>
</body>
</html>
